{"version":3,"sources":["img/black-circle.svg","img/red-circle.svg","components/Boards.js","factories/GameBoardFactory.js","factories/ShipFactory.js","factories/PlayerFactory.js","App.js","index.js"],"names":["Boards","props","playerBoard","computerBoard","handleClick","event","handlePlayerTurn","target","textContent","className","board","map","row","cell","missedAttacks","includes","src","BlackCircle","alt","successfulAttacks","RedCircle","onClick","lodash","require","GameBoardFactory","occupiedCoords","height","range","length","code","String","fromCharCode","num","char","createBoard","placeShip","coords","ship","push","receiveAttack","coord","i","pair","index","findIndex","x","hit","allShipsSunk","counter","forEach","isSunk","ShipFactory","hull","Array","from","every","compartment","PlayerFactory","attacks","humanAttack","Error","computerAttack","mockBoard","Math","floor","random","y","attackCoord","App","useState","setPlayerBoard","setComputerBoard","player","setPlayer","computer","setComputer","userTurn","setUserTurn","roundCounter","setRoundCounter","playerCoords","computerCoords","initializeBoards","identifier","useEffect","alert","setUpNewGame","setTimeout","newComputer","Object","assign","newPlayerBoard","computerAttacks","currentAttack","slice","computerTurn","newPlayer","newComputerBoard","e","message","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.efa7ac42.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/black-circle.17c07aa9.svg\";","export default __webpack_public_path__ + \"static/media/red-circle.a8866b39.svg\";","import React from 'react';\nimport BlackCircle from '../img/black-circle.svg';\nimport RedCircle from '../img/red-circle.svg';\n\nfunction Boards(props) {\n\n  const { playerBoard, computerBoard } = props;\n  \n  const handleClick = (event) => {\n    props.handlePlayerTurn(event.target.textContent)\n  }\n\n  return (\n    <div className=\"Boards\">\n      <h2 className=\"PlayerBoardHeader\">Player Board</h2>\n      <div className=\"PlayerBoard\">\n        {playerBoard.board.map((row) => (\n          row.map((cell) => {\n            if (playerBoard.missedAttacks.includes(cell)) {\n              return (\n                <div key={cell} className=\"PlayerCell\">\n                  <img \n                    className=\"MissIcon\" \n                    src={BlackCircle} \n                    alt=\"Missed Attack\"\n                  />\n                </div>\n              )\n            } else if (playerBoard.successfulAttacks.includes(cell)) {\n              return (\n                <div key={cell} className=\"PlayerCell\">\n                  <img \n                    className=\"HitIcon\" \n                    src={RedCircle} \n                    alt=\"Missed Attack\"\n                  />\n                </div>\n              )\n            } else {\n              return (\n                <div key={cell} className=\"PlayerCell\">\n                  {cell}\n                </div>\n              )\n            }\n          })\n        ))}\n      </div>\n      <h2 className=\"ComputerBoardHeader\">Computer Board</h2>\n      <div className=\"ComputerBoard\">\n        {computerBoard.board.map((row) => (\n          row.map((cell) => {\n            if (computerBoard.missedAttacks.includes(cell)) {\n              return (\n                <div key={cell} className=\"ComputerCell\">\n                  <img \n                    className=\"MissIcon\" \n                    src={BlackCircle} \n                    alt=\"Missed Attack\"\n                  />\n                </div>\n              )\n            } else if (computerBoard.successfulAttacks.includes(cell)) {\n              return (\n                <div key={cell} className=\"ComputerCell\">\n                  <img \n                    className=\"HitIcon\" \n                    src={RedCircle} \n                    alt=\"Missed Attack\"\n                  />\n                </div>\n              )\n            } else {\n              return (\n                <div key={cell} className=\"ComputerCell\" onClick={handleClick}>\n                  {cell}\n                </div>\n              )\n            }\n          })\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default Boards;","var lodash = require('lodash')\n\nfunction GameBoardFactory() {\n\n  let occupiedCoords = [];\n  let missedAttacks = [];\n  let successfulAttacks = [];\n\n  const createBoard = () => {\n    const height = lodash.range(1, 11);\n    const length = lodash.range(65, 75).map((code) => String.fromCharCode(code));\n    const board = height.map((num) => {\n      return length.map((char) => {\n        return `${char}${num}`;\n      });\n    });\n    return board;\n  }\n\n  const board = createBoard();\n\n  const placeShip = (coords, ship) => {\n    occupiedCoords.push([ship, coords]);\n    return occupiedCoords;\n  }\n\n  const receiveAttack = (coord) => {\n    // pair[0] is the ship\n    // pair[1] is an array of the ship coords\n    for (let i = 0; i < occupiedCoords.length; i++) {\n      const pair = occupiedCoords[i];\n      if (pair[1].includes(coord)) {\n        const index = pair[1].findIndex((x) => x === coord);\n        pair[0].hit(index);\n        successfulAttacks.push(coord);\n        return pair;\n      }\n    }\n    missedAttacks.push(coord);\n  }\n\n  const allShipsSunk = () => {\n    let counter = 0;\n    occupiedCoords.forEach((pair) => {\n      if (pair[0].isSunk()) {\n        counter += 1;\n      }\n    });\n    if (counter === 10) {\n      return true;\n    }\n    return false;\n  }\n\n  return { \n    board, \n    placeShip, \n    receiveAttack, \n    occupiedCoords, \n    missedAttacks,\n    successfulAttacks,\n    allShipsSunk \n  };\n}\n\nexport default GameBoardFactory;","function ShipFactory(length) {\n\n  const hull = Array.from({ length: length }).map(() => \"\");\n\n  const hit = (index) => {\n    hull[index] = \"X\";\n  }\n\n  const isSunk = () => {\n    return hull.every((compartment) => compartment === \"X\");\n  }\n\n  return { hull, hit, isSunk };\n}\n\nexport default ShipFactory;","var lodash = require('lodash');\n\nfunction PlayerFactory() {\n  let attacks = [];\n\n  const humanAttack = (coord) => {\n    if (attacks.includes(coord)) {\n      throw new Error('You cannot attack the same cell twice!');\n    } else {\n      attacks.push(coord);\n      return attacks;\n    }\n  }\n\n  const computerAttack = () => {\n    const height = lodash.range(1, 11);\n    const length = lodash.range(65, 75).map((code) => String.fromCharCode(code));\n    const mockBoard = height.map((num) => {\n      return length.map((char) => {\n        return `${char}${num}`;\n      });\n    });\n    while (true) {\n      const x = Math.floor(Math.random() * 10);\n      const y = Math.floor(Math.random() * 10);\n      const attackCoord = mockBoard[x][y];\n      if (attacks.includes(attackCoord)) {\n        continue;\n      } else {\n        attacks.push(attackCoord);\n        return attacks;\n      }\n    }\n  }\n\n  return { humanAttack, computerAttack, attacks }\n}\n\nexport default PlayerFactory;","import React, { useState, useEffect } from 'react';\nimport Boards from './components/Boards';\nimport GameBoardFactory from './factories/GameBoardFactory';\nimport ShipFactory from './factories/ShipFactory';\nimport PlayerFactory from './factories/PlayerFactory';\n\n\nfunction App() {\n\n  const [ playerBoard, setPlayerBoard ] = useState(GameBoardFactory());\n  const [ computerBoard, setComputerBoard ] = useState(GameBoardFactory());\n\n  const [ player, setPlayer ] = useState(PlayerFactory());\n  const [ computer, setComputer ] = useState(PlayerFactory());\n\n  const [ userTurn, setUserTurn ] = useState(true);\n  let [ roundCounter, setRoundCounter ] = useState(0);\n\n  const playerCoords = [\n    ['A1', 'A2', 'A3', 'A4'],\n    ['B1', 'B2', 'B3'],\n    ['C1', 'C2', 'C3'],\n    ['D1', 'D2'],\n    ['E1', 'E2'],\n    ['F1', 'F2'],\n    ['G1'],\n    ['H1'],\n    ['I1'],\n    ['J1'],\n  ]\n\n  const computerCoords = [\n    ['J7', 'J8', 'J9', 'J10'],\n    ['I8', 'I9', 'I10'],\n    ['H8', 'H9', 'H10'],\n    ['G9', 'G10'],\n    ['F9', 'F10'],\n    ['E9', 'E10'],\n    ['D10'],\n    ['C10'],\n    ['B10'],\n    ['A10'],\n  ]\n\n  const initializeBoards = (identifier, coords) => {\n    if (identifier === 'Player') {\n      coords.forEach((coord) => {\n        playerBoard.placeShip(coord, ShipFactory(coord.length))\n        setPlayerBoard(playerBoard)\n      })\n    } else {\n      coords.forEach((coord) => {\n        computerBoard.placeShip(coord, ShipFactory(coord.length))\n        setComputerBoard(computerBoard)\n      })\n    }\n  }\n\n  const computerTurn = () => {\n    if (playerBoard.allShipsSunk()) {\n      alert('Game over! The Computers won!');\n      setUpNewGame();\n      return;\n    }\n    if (userTurn === false) {\n      const newComputer = Object.assign({}, computer);\n      const newPlayerBoard = Object.assign({}, playerBoard);\n      const computerAttacks = newComputer.computerAttack();\n      const currentAttack = computerAttacks.slice(computerAttacks.length - 1);\n      newPlayerBoard.receiveAttack(currentAttack[0]);\n      setPlayerBoard(newPlayerBoard);\n      setComputer(newComputer);\n      setUserTurn(true);\n      setRoundCounter(roundCounter += 1);\n    }\n  }\n\n  useEffect(() => {\n    if (roundCounter === 0) {\n      initializeBoards('Player', playerCoords);\n      initializeBoards('Computer', computerCoords);\n    }\n  })\n\n  useEffect(() => {\n    if (computerBoard.allShipsSunk()) {\n      alert('Game over! Humans won!');\n      setUpNewGame();\n      return;\n    }\n    setTimeout(() => computerTurn(), 0);\n  }, [userTurn])\n\n  const setUpNewGame = () => {\n    setUserTurn(true);\n    setPlayer(PlayerFactory());\n    setComputer(PlayerFactory());\n    setPlayerBoard(GameBoardFactory());\n    setComputerBoard(GameBoardFactory());\n    setRoundCounter(0);\n  }\n\n  const handlePlayerTurn = (coord) => {\n    if (userTurn) {\n      const newPlayer = Object.assign({}, player);\n      const newComputerBoard = Object.assign({}, computerBoard);\n      try {\n        newComputerBoard.receiveAttack(coord);\n        newPlayer.humanAttack(coord);\n        setUserTurn(false);\n        setPlayer(newPlayer);\n        setComputerBoard(newComputerBoard);\n        setRoundCounter(roundCounter += 1);\n      } catch (e) {\n        alert(e.message)\n      }\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"Header\">\n        <h1>Battleship</h1>\n      </div>\n      {userTurn ? \n          <div className=\"Turn\">\n            Your Turn!\n          </div>\n        : <div className=\"Turn\">\n            Computer's Turn!\n          </div>\n      }\n      <Boards \n        playerBoard={playerBoard}\n        computerBoard={computerBoard}\n        handlePlayerTurn={handlePlayerTurn}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}